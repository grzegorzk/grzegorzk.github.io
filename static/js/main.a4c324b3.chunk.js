(window.webpackJsonppasstore=window.webpackJsonppasstore||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(5),o=n.n(s),i=(n(16),n(6)),p=n(2),d=n(3),l=n(10),c=n(7),u=n(1),w=n(9),h=n(8);var g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!["GET","POST","HEAD"].includes(n.toUpperCase()))throw new Error("Unhandled method passed");var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE){if(200===a.status){var e=document.createElement("script");e.innerHTML=a.responseText,document.querySelector("head").appendChild(e)}"undefined"!=typeof t&&setTimeout(function(){t(a.responseText,a.status,a)},0)}},a.open(n,e,r),a.send()},f={apiKey:"AIzaSyA3k2KGpFCPZolfzG0dZxIMQSNEBTK2Q0s",clientId:"693421068041-8v4j719d0cg5dek8ab2elmen2mqe33b8.apps.googleusercontent.com",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4","https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scopes:"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/spreadsheets"},_=function(){function e(){Object(d.a)(this,e),this.gapi=null,this.init_gapi_callback=function(){},this.instance=null,this.spreadsheet_id=null,this.invalid_spreadsheet_id=-1}return Object(h.a)(e,[{key:"is_ready",value:function(){return null!=this.gapi}},{key:"get_gapi_callback",value:function(){return this.init_gapi_callback}},{key:"sign_in",value:function(){if(!this.is_ready())throw new Error("Gooogle API is still loading, please try again");this.gapi.auth2.getAuthInstance().signIn()}},{key:"sign_out",value:function(){if(!this.is_ready())throw new Error("Gooogle API is still loading, please try again");this.gapi.auth2.getAuthInstance().signOut()}},{key:"load_spreadsheet",value:function(e,t){if(!this.is_ready())throw new Error("Gooogle API is still loading, please try again");if(!window.gapi.auth2.getAuthInstance().isSignedIn.get())throw new Error("You need to be signed in to create documents");if(null!=this.spreadsheet_id)throw new Error("Your request is being processed or document has already been created");this.spreadsheet_id=this.invalid_spreadsheet_id;var n=this.instance,r=function(e,t){var r={spreadsheetId:e,ranges:"Sheet1!A:D",majorDimension:"ROWS"};n.gapi.client.sheets.spreadsheets.values.batchGet(r).then(function(e){if(1!==e.result.valueRanges.length)throw new Error("Only one range was expected, got "+e.result.valueRanges.length);var n=[],r=e.result.valueRanges[0].values;if(r instanceof Array!==!1){for(var a=0;a<r.length;a++){var s=r[a],o="",i="",p="",d="",l=1+a;s.length>=1&&(o=s[0]),s.length>=2&&(i=s[1]),s.length>=3&&(p=s[2]),s.length>=4&&(d=s[3]),n.push({url:o,uname:i,encrypted_pwd:p,init_vector:d,index:l})}t(n)}else t(n)},function(e){console.error("error: "+e.result.error.message)})};this.gapi.client.drive.files.list({pageSize:10,q:"mimeType='application/vnd.google-apps.spreadsheet' and name='"+e+"'",fields:"nextPageToken, files(id, name)"}).then(function(a){var s=a.result.files;if(s&&1===s.length)for(var o=null,i=0;i<s.length;i++)o=s[i],n.spreadsheet_id=o.id,r(o.id,t);else{if(s.length>1){n.spreadsheet_id=n.invalid_spreadsheet_id;var p="More than one '"+e+"' found. Remove unwanted copy and try again";throw p+="\nIf you removed duplicate remember to also remove it from google drive trash",console.error(p),alert(p),new Error(p)}!function(e,t){n.gapi.client.sheets.spreadsheets.create({properties:{title:e}}).then(function(e){n.spreadsheet_id=e.result.spreadsheetId,t([])})}(e,t)}})}},{key:"update_entry",value:function(e,t,n,r){if(!["A","a","B","b","C","c","D","d"].includes(t))throw new Error("Only columns A, B or C are allowed");if(!this.is_ready())throw new Error("Gooogle API is still loading, please try again");if(!window.gapi.auth2.getAuthInstance().isSignedIn.get())throw new Error("You need to be signed in to create documents");if(null==this.spreadsheet_id)throw new Error("Spreadsheet with passwords have not been created yet");var a=this.instance,s={spreadsheetId:a.spreadsheet_id},o={valueInputOption:"RAW",data:[{range:"Sheet1!"+t+e,majorDimension:"ROWS",values:[[n||""]]}]};a.gapi.client.sheets.spreadsheets.values.batchUpdate(s,o).then(function(e){r()},function(e){console.error("error: "+e.result.error.message)})}}]),e}();if(!("TextEncoder"in window))throw new Error("Sorry, your browser needs to be updated before you can use this tool.");function y(e){for(var t=JSON.parse("["+e+"]"),n=new ArrayBuffer(t.length),r=new Uint8Array(n),a=0;a<t.length;a++)r[a]=t[a];return n}function m(e){if("string"!=typeof e)throw new Error("Cannot convert "+typeof e+" to Uint8Array.");return crypto.subtle.digest({name:"SHA-256"},(new TextEncoder).encode(e)).then(function(e){return window.crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt","decrypt"])},function(e){console.error(e)})}function v(e,t,n){if("string"!=typeof n)throw new Error("Cannot convert "+typeof n+" to Uint8Array.");return window.crypto.subtle.encrypt({name:"AES-CBC",iv:t},e,(new TextEncoder).encode(n)).then(function(e){return new Uint16Array(e).join(",")},function(e){console.error(e)})}function b(e,t,n){return window.crypto.subtle.decrypt({name:"AES-CBC",iv:t},e,function(e){for(var t=JSON.parse("["+e+"]"),n=new ArrayBuffer(2*t.length),r=new Uint16Array(n),a=0;a<t.length;a++)r[a]=t[a];return n}(n)).then(function(e){return(new TextDecoder).decode(e)},function(e){console.error(e)})}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(i.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).update_sign_in_status=function(e){n.setState({logged_in:e})},n.render=function(){return a.a.createElement("div",null,a.a.createElement("h4",{className:"bg-primary text-white text-center p-2"},"Passwords"),a.a.createElement("button",{className:"btn btn-primary m-2",style:n.state.logged_in?{display:"none"}:{display:"block"},onClick:n.gapi_oauth},"Authenticate to your google account"),a.a.createElement("button",{className:"btn btn-primary m-2",style:n.state.logged_in?{display:"block"}:{display:"none"},onClick:n.gapi_logout},"Log out from your google account"),a.a.createElement("button",{className:"btn btn-primary m-2",style:n.state.logged_in&&null==n.state.passwords?{display:"block"}:{display:"none"},onClick:n.gapi_load_spreadsheet},"Open spreadsheet"),a.a.createElement("button",{className:"btn btn-primary m-2",style:n.state.logged_in&&null!=n.state.passwords?{display:"block"}:{display:"none"},onClick:n.gapi_unload_spreadsheet},"Unload spreadsheet"),a.a.createElement("table",{className:"table",style:n.state.logged_in&&null!=n.state.passwords?{display:"block"}:{display:"none"}},a.a.createElement("thead",{className:"thead-dark"},a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"#"),a.a.createElement("th",{scope:"col"},"url"),a.a.createElement("th",{scope:"col"},"user name"),a.a.createElement("th",{scope:"col"},"password"))),a.a.createElement("tbody",null,null!=n.state.passwords?n.state.passwords.map(function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,1+t),a.a.createElement("td",{onClick:function(){return n.update_url(t)}},e.url),a.a.createElement("td",{onClick:function(){return n.update_uname(t)}},e.uname),a.a.createElement("td",{onClick:function(){return n.gapi_pwd_to_clipboard(t)}},"***"),a.a.createElement("td",{onClick:function(){return n.gapi_update_pwd(t)}},"change password"))}):null)),a.a.createElement("button",{className:"btn btn-primary m-2",style:n.state.logged_in&&null!=n.state.passwords?{display:"block"}:{display:"none"},onClick:n.gapi_add_row},"Add"))},n.gapi_oauth=function(){try{n.gapi_wrapper.sign_in()}catch(e){alert(e)}},n.gapi_logout=function(){n.gapi_unload_spreadsheet();try{n.gapi_wrapper.sign_out()}catch(e){alert(e)}},n.update_passwords_in_state=function(e){n.setState({passwords:e})},n.gapi_load_spreadsheet=function(){try{n.gapi_wrapper.load_spreadsheet(n.spreadsheet_name,n.update_passwords_in_state)}catch(e){alert(e)}},n.gapi_unload_spreadsheet=function(){n.setState({passwords:null}),n.gapi_wrapper.spreadsheet_id=null},n.update_url_in_state=function(e,t){if(null==n.state.passwords)throw new Error("Tried to update uninitialised this.state.passwords");if(n.state.passwords.length-1<e)throw new Error("Tried to update this.state.passwords at nonexisting index");var r=Object(p.a)(n.state.passwords),a=O({},r[e]);a.url=t,r[e]=a;var s=Object(u.a)(n);n.gapi_wrapper.update_entry(a.index,"A",a.url,function(){s.setState({passwords:r})})},n.update_url=function(e){var t=prompt(n.state.passwords[e].url);n.update_url_in_state(e,t)},n.update_uname_in_state=function(e,t){if(null==n.state.passwords)throw new Error("Tried to update uninitialised this.state.passwords");if(n.state.passwords.length-1<e)throw new Error("Tried to update this.state.passwords at nonexisting index");var r=Object(p.a)(n.state.passwords),a=O({},r[e]);a.uname=t,r[e]=a,n.setState({passwords:r});var s=Object(u.a)(n);n.gapi_wrapper.update_entry(a.index,"B",a.uname,function(){s.setState({passwords:r})})},n.update_uname=function(e){var t=prompt(n.state.passwords[e].uname);n.update_uname_in_state(e,t)},n.gapi_add_row=function(){if(null==n.state.passwords)throw new Error("Tried to update uninitialised this.state.passwords");var e=1;n.state.passwords.length>0&&(e=1+n.state.passwords.slice(-1)[0].index);var t=Object(p.a)(n.state.passwords);t.push({index:e,url:"",uname:"",encrypted_pwd:"",init_vector:[]}),n.setState({passwords:t})},n.update_pwd_in_state=function(e,t,r){if(null==n.state.passwords)throw new Error("Tried to update uninitialised this.state.passwords");if(n.state.passwords.length-1<e)throw new Error("Tried to update this.state.passwords at nonexisting index");var a=Object(p.a)(n.state.passwords),s=O({},a[e]);s.encrypted_pwd=t,s.init_vector=r,a[e]=s,n.setState({passwords:a});var o=Object(u.a)(n),i=function(){o.setState({passwords:a})};n.gapi_wrapper.update_entry(s.index,"C",s.encrypted_pwd,i),n.gapi_wrapper.update_entry(s.index,"D",s.init_vector,i)},n.gapi_update_pwd=function(e){var t=prompt("Please provide new password"),r=prompt("Please provide master password to encrypt new password"),a=n.update_pwd_in_state,s=window.crypto.getRandomValues(new Uint8Array(16)).join(",");(function(e,t,n){var r=y(t);return m(e).then(function(e){return v(e,r,n)},function(e){console.error(e)})})(r,s,t).then(function(t){a(e,t,s)},function(e){console.error(e),alert("Error when encrypting your password, please try again.")}),r=""},n.gapi_pwd_to_clipboard=function(e){var t=prompt("Please provide master password to decrypt password"),r=n.state.passwords[e].encrypted_pwd;(function(e,t,n){var r=y(t);return m(e).then(function(e){return b(e,r,n)},function(e){console.error(e)})})(t,n.state.passwords[e].init_vector,r).then(function(e){prompt("The password:",e)},function(e){console.error(e),alert("Error when decrypting your password, please try again.")})},n.state={logged_in:!1,passwords:null},n.spreadsheet_name="do_not_rename_me_aes_256_passwords.xls",n.gapi_wrapper=function(e){if(!e&&"[object Function]"==={}.toString.call(e))throw new Error("signed_in_hook must be a function.");var t=new _;return t.instance=t,t.init_gapi_callback=function(){window.gapi.client.init({apiKey:f.apiKey,clientId:f.clientId,discoveryDocs:f.discoveryDocs,scope:f.scopes}).then(function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen(e),e(window.gapi.auth2.getAuthInstance().isSignedIn.get()),t.gapi=window.gapi},function(e){console.log(JSON.stringify(e,null,2))})},g("https://apis.google.com/js/api.js",function(){window.gapi.load("client:auth2",t.init_gapi_callback)}),t}(n.update_sign_in_status),n}return Object(w.a)(t,e),t}(a.a.Component);n(17);o.a.render(a.a.createElement(k,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.a4c324b3.chunk.js.map