{"version":3,"sources":["xhr_loader.js","gapi_config.js","App.js","index.js"],"names":["xhr_load_script","url","callback","method","is_async","includes","toUpperCase","Error","xhr","XMLHttpRequest","onreadystatechange","readyState","DONE","status","script","document","createElement","innerHTML","responseText","querySelector","appendChild","setTimeout","open","send","credentials","apiKey","clientId","discoveryDocs","scopes","GapiWrapper","this","gapi","init_gapi_callback","instance","spreadsheet_id","invalid_spreadsheet_id","is_ready","auth2","getAuthInstance","signIn","signOut","title","window","isSignedIn","get","this_gapi_wrapper","get_spreadsheet_rows","params","spreadsheetId","ranges","majorDimension","client","sheets","spreadsheets","values","batchGet","then","response","result","valueRanges","length","passwords","i","push","uname","encrypted_pwd","index","console","error","reason","message","drive","files","list","file","id","error_msg","log","alert","create","properties","create_spreadsheet","pass","old_md5","App","props","update_sign_in_status","setState","logged_in","render","className","style","state","display","onClick","gapi_oauth","gapi_logout","gapi_load_spreadsheet","gapi_unload_spreadsheet","scope","map","value","key","update_url","update_uname","gapi_pwd_to_clipboard","gapi_update_pwd","gapi_wrapper","sign_in","e","sign_out","update_passwords_in_state","load_spreadsheet","spreadsheet_name","update_url_in_state","new_url","pwd","prompt","update_uname_in_state","new_uname","signed_in_hook","toString","call","init","listen","JSON","stringify","load","create_gapi_wrapper","React","Component","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.8d77f556.chunk.js","sourcesContent":["function xhr_load_script(url, callback, method=\"GET\", is_async=true) {\n    if ( ! [\"GET\", \"POST\", \"HEAD\"].includes(method.toUpperCase()) ) {\n        throw new Error(\"Unhandled method passed\");\n    }\n\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function() {\n        if (xhr.readyState === XMLHttpRequest.DONE) {\n            if (xhr.status === 200) {\n                var script = document.createElement(\"script\");\n                script.innerHTML = xhr.responseText;\n                document.querySelector(\"head\").appendChild(script);\n            }\n            if (typeof callback != \"undefined\") {\n                setTimeout(function(){callback(xhr.responseText, xhr.status, xhr)}, 0);\n            }\n        }\n    };\n\n    xhr.open(method, url, is_async);\n    xhr.send();\n}\n\nexport default xhr_load_script;\n","import xhr_load_script from \"./xhr_loader\";\n\n/* scopes: https://developers.google.com/sheets/api/guides/authorizing\n * Multiple scopes are allowed, separate them with spaces\n */\nvar credentials = {\n    apiKey: \"AIzaSyA3k2KGpFCPZolfzG0dZxIMQSNEBTK2Q0s\",\n    clientId: \"693421068041-8v4j719d0cg5dek8ab2elmen2mqe33b8.apps.googleusercontent.com\",\n    discoveryDocs: [\"https://sheets.googleapis.com/$discovery/rest?version=v4\",\n        \"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"],\n    scopes: \"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/spreadsheets\"\n};\n\n/* interface class abstracting away gapi from the app\n * https://developers.google.com/sheets/api/\n */\nclass GapiWrapper {\n    constructor() {\n        this.gapi = null;\n        this.init_gapi_callback = function() {};\n        this.instance = null;\n        this.spreadsheet_id = null;\n        this.invalid_spreadsheet_id = -1;\n    }\n\n    is_ready() {\n        if ( this.gapi == null )\n            return false;\n        return true;\n    }\n\n    get_gapi_callback() {\n        return this.init_gapi_callback;\n    }\n\n    sign_in() {\n        if ( ! this.is_ready() ) {\n            throw new Error(\"Gooogle API is still loading, please try again\");\n        }\n        this.gapi.auth2.getAuthInstance().signIn();\n    }\n\n    sign_out() {\n        if ( ! this.is_ready() ) {\n            throw new Error(\"Gooogle API is still loading, please try again\");\n        }\n        this.gapi.auth2.getAuthInstance().signOut();\n    }\n\n    // TODO: refactor\n    load_spreadsheet(title, callback) {\n        if ( ! this.is_ready() ) {\n            throw new Error(\"Gooogle API is still loading, please try again\");\n        }\n        if ( ! window.gapi.auth2.getAuthInstance().isSignedIn.get() ) {\n            throw new Error(\"You need to be signed in to create documents\");\n        }\n        if ( this.spreadsheet_id != null ) {\n            throw new Error(\"Your request is being processed or document has already been created\");\n        }\n\n        // User may quickly click multiple times\n        // We need to ensure above condition won't let us in next time\n        // That's why we set magic number below\n        this.spreadsheet_id = this.invalid_spreadsheet_id;\n\n        var this_gapi_wrapper = this.instance;\n\n        var create_spreadsheet = function(title, callback) {\n            this_gapi_wrapper.gapi.client.sheets.spreadsheets.create({\n                properties: {title: title}\n            }).then((response) => {\n                this_gapi_wrapper.spreadsheet_id = response.result.spreadsheetId;\n                callback([]);\n            });\n        }\n\n        var get_spreadsheet_rows = function(spreadsheet_id, callback) {\n            var params = {\n                spreadsheetId: spreadsheet_id,\n                ranges: \"Sheet1!A:C\",\n                majorDimension: \"ROWS\"\n            };\n\n            var request = this_gapi_wrapper.gapi.client.sheets.spreadsheets.values.batchGet(params);\n            request.then(function(response) {\n                if ( response.result.valueRanges.length !== 1 ) {\n                    throw new Error(\"Only one range was expected, got \" + response.result.valueRanges.length);\n                }\n                var passwords = [];\n                // TODO: replace magic column numbers with properties from this_gapi_wrapper\n                for ( var i = 0 ; i < response.result.valueRanges[0].values.length ; i ++ ) {\n                    if ( response.result.valueRanges[0].values[i].length != 3 ) {\n                        console.error(\"Row \" + i + \" does not contain 3 columns\");\n                        continue;\n                    }\n                    passwords.push({\n                        url: response.result.valueRanges[0].values[i][0],\n                        uname: response.result.valueRanges[0].values[i][1],\n                        encrypted_pwd: response.result.valueRanges[0].values[i][2],\n                        index: i\n                    })\n                }\n                callback(passwords);\n            }, function(reason) {\n                console.error(\"error: \" + reason.result.error.message);\n            });\n        }\n\n        // Check if file already exists\n        // https://developers.google.com/drive/api/v3/search-files\n        this.gapi.client.drive.files.list({\n            'pageSize': 10,\n            'q': \"mimeType='application/vnd.google-apps.spreadsheet' and name='\" + title + \"'\",\n            'fields': \"nextPageToken, files(id, name)\"\n        }).then(function(response) {\n            var files = response.result.files;\n            if ( files && files.length === 1 ) {\n                var file = null;\n                for (var i = 0; i < files.length; i++) {\n                    file = files[i];\n                    this_gapi_wrapper.spreadsheet_id = file.id;\n                    get_spreadsheet_rows(file.id, callback);\n                }\n            } else if ( files.length > 1 ) {\n                // This is critical situation, user should not proceed\n                this_gapi_wrapper.spreadsheet_id = this_gapi_wrapper.invalid_spreadsheet_id;\n\n                var error_msg = \"More than one '\" + title + \"' found. Remove unwanted copy and try again\";\n                error_msg += \"\\nIf you removed duplicate remember to also remove it from google drive trash\";\n                console.log(error_msg);\n                alert(error_msg);\n                throw new Error(error_msg);\n            } else {\n                create_spreadsheet(title, callback);\n            }\n        });\n    }\n\n    add_new_entry(url, uname, pass, callback) {\n        if ( ! this.is_ready() ) {\n            throw new Error(\"Gooogle API is still loading, please try again\");\n        }\n        if ( ! window.gapi.auth2.getAuthInstance().isSignedIn.get() ) {\n            throw new Error(\"You need to be signed in to create documents\");\n        }\n        if ( this.spreadsheet_id == null ) {\n            throw new Error(\"Spreadsheet with passwords have not been created yet\");\n        }\n    }\n\n    update_entry(index, url, uname, pass, old_md5, callback) {\n        if ( ! this.is_ready() ) {\n            throw new Error(\"Gooogle API is still loading, please try again\");\n        }\n        if ( ! window.gapi.auth2.getAuthInstance().isSignedIn.get() ) {\n            throw new Error(\"You need to be signed in to create documents\");\n        }\n        if ( this.spreadsheet_id == null ) {\n            throw new Error(\"Spreadsheet with passwords have not been created yet\");\n        }\n    }\n}\n\n/* Cannot use GapiWrapper constructor because we need to pass instance of it to async callback */\nexport default function create_gapi_wrapper(signed_in_hook) {\n    // signed_in_hook must be a function\n    if ( ! signed_in_hook && {}.toString.call(signed_in_hook) === '[object Function]' )\n        throw new Error(\"signed_in_hook must be a function.\");\n\n    var gapi_wrapper = new GapiWrapper();\n    gapi_wrapper.instance = gapi_wrapper;\n    gapi_wrapper.init_gapi_callback = function() {\n        window.gapi.client.init({\n            apiKey: credentials.apiKey,\n            clientId: credentials.clientId,\n            discoveryDocs: credentials.discoveryDocs,\n            scope: credentials.scopes\n        }).then(function () {\n            // Listen for sign-in state changes.\n            window.gapi.auth2.getAuthInstance().isSignedIn.listen(signed_in_hook);\n\n            // Handle the initial sign-in state.\n            signed_in_hook(window.gapi.auth2.getAuthInstance().isSignedIn.get());\n            // Pass gapi object to the wrapper for later use\n            gapi_wrapper.gapi = window.gapi;\n        }, function(error) {\n            console.log(JSON.stringify(error, null, 2));\n        });\n    }\n\n    xhr_load_script(\"https://apis.google.com/js/api.js\", function(){\n        window.gapi.load('client:auth2', gapi_wrapper.init_gapi_callback)\n    });\n\n    return gapi_wrapper;\n}\n","import React from \"react\";\nimport create_gapi_wrapper from \"./gapi_config\";\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            logged_in: false,\n            passwords: null\n        }\n        this.spreadsheet_name = \"do_not_rename_me_aes_256_passwords.xls\";\n        this.gapi_wrapper = create_gapi_wrapper(this.update_sign_in_status);\n    }\n    update_sign_in_status = (status) => {\n        this.setState({\n            logged_in: status\n        });\n    }\n    render = () => {\n        return (\n            <div>\n                <h4 className=\"bg-primary text-white text-center p-2\">\n                    Passwords\n                </h4>\n                <button className=\"btn btn-primary m-2\"\n                        style={ this.state.logged_in ? {display: \"none\"} : {display: \"block\"} }\n                        onClick={ this.gapi_oauth }>\n                    Authenticate to your google account\n                </button>\n                <button className=\"btn btn-primary m-2\"\n                        style={ this.state.logged_in ? {display: \"block\"} : {display: \"none\"} }\n                        onClick={ this.gapi_logout }>\n                    Log out from your google account\n                </button>\n                <button className=\"btn btn-primary m-2\"\n                        style={ this.state.logged_in && this.state.passwords == null ? {display: \"block\"} : {display: \"none\"} }\n                        onClick={ this.gapi_load_spreadsheet }>\n                    Open spreadsheet\n                </button>\n                <button className=\"btn btn-primary m-2\"\n                        style={ this.state.logged_in && this.state.passwords != null ? {display: \"block\"} : {display: \"none\"} }\n                        onClick={ this.gapi_unload_spreadsheet }>\n                    Unload spreadsheet\n                </button>\n                <table className=\"table\"\n                        style={ this.state.logged_in && this.state.passwords != null ? {display: \"block\"} : {display: \"none\"} } >\n                    <thead className=\"thead-dark\">\n                        <tr>\n                            <th scope=\"col\">#</th>\n                            <th scope=\"col\">url</th>\n                            <th scope=\"col\">user name</th>\n                            <th scope=\"col\">password</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {this.state.passwords != null ? this.state.passwords.map((value, index) => {\n                        return <tr key={index}>\n                            <td>{index}</td>\n                            <td onClick={ () => this.update_url(index) }>{value.url}</td>\n                            <td onClick={ () => this.update_uname(index) }>{value.uname}</td>\n                            <td onClick={ () => this.gapi_pwd_to_clipboard(index) }>***</td>\n                            <td onClick={ () => this.gapi_update_pwd(index) }>change password</td>\n                        </tr>\n                    }) : null}\n                    </tbody>\n                </table>\n                <button className=\"btn btn-primary m-2\"\n                        style={ this.state.logged_in && this.state.passwords != null ? {display: \"block\"} : {display: \"none\"} }\n                        onClick={ this.gapi_unload_spreadsheet }>\n                    Add\n                </button>\n            </div>\n        )\n    }\n    gapi_oauth = () => {\n        try {\n            this.gapi_wrapper.sign_in();\n        } catch (e) {\n            alert(e);\n        }\n    }\n    gapi_logout = () => {\n        try {\n            this.gapi_wrapper.sign_out();\n        } catch (e) {\n            alert(e);\n        }\n    }\n\n    update_passwords_in_state = (values) => {\n        this.setState({\n            passwords: values\n        });\n    }\n    gapi_load_spreadsheet = () => {\n        try {\n            this.gapi_wrapper.load_spreadsheet(this.spreadsheet_name, this.update_passwords_in_state);\n        } catch (e) {\n            alert(e);\n        }\n    }\n\n    gapi_unload_spreadsheet = () => {\n        this.setState({\n            passwords: null,\n        });\n        this.gapi_wrapper.spreadsheet_id = null;\n    }\n\n    update_url_in_state = (index, new_url) => {\n        if ( this.state.passwords == null ) {\n            throw new Error(\"Tried to update uninitialised this.state.passwords\");\n            return;\n        }\n        if ( this.state.passwords.length - 1 < index ) {\n            throw new Error(\"Tried to update this.state.passwords at nonexisting index\");\n            return;\n        }\n\n        // https://stackoverflow.com/questions/29537299\n        let passwords = [...this.state.passwords];\n        let pwd = {...passwords[index]};\n        pwd.url = new_url;\n        passwords[index] = pwd;\n        this.setState({\n            passwords: passwords\n        });\n    }\n    update_url = (index) => {\n        var new_url = prompt(this.state.passwords[index].url);\n        this.update_url_in_state(index, new_url);\n    }\n\n    update_uname_in_state = (index, new_uname) => {\n        if ( this.state.passwords == null ) {\n            throw new Error(\"Tried to update uninitialised this.state.passwords\");\n            return;\n        }\n        if ( this.state.passwords.length - 1 < index ) {\n            throw new Error(\"Tried to update this.state.passwords at nonexisting index\");\n            return;\n        }\n\n        let passwords = [...this.state.passwords];\n        let pwd = {...passwords[index]};\n        pwd.uname = new_uname;\n        passwords[index] = pwd;\n        this.setState({\n            passwords: passwords\n        });\n    }\n    update_uname = (index) => {\n        var new_uname = prompt(this.state.passwords[index].uname);\n        this.update_uname_in_state(index, new_uname);\n    }\n\n    gapi_pwd_to_clipboard = (index) => {\n    }\n    gapi_update_pwd = (index) => {\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}