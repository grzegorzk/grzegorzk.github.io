(window.webpackJsonppasstore=window.webpackJsonppasstore||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(4),i=a.n(r),o=(a(15),a(5)),l=a(2),d=a(1),p=a(8),u=a(6),c=a(9),g=a(7);var h=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!["GET","POST","HEAD"].includes(a.toUpperCase()))throw new Error("Unhandled method passed");var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE){if(200===s.status){var e=document.createElement("script");e.innerHTML=s.responseText,document.querySelector("head").appendChild(e)}"undefined"!=typeof t&&setTimeout(function(){t(s.responseText,s.status,s)},0)}},s.open(a,e,n),s.send()},w={apiKey:"AIzaSyA3k2KGpFCPZolfzG0dZxIMQSNEBTK2Q0s",clientId:"693421068041-8v4j719d0cg5dek8ab2elmen2mqe33b8.apps.googleusercontent.com",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4","https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scopes:"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/spreadsheets"},_=function(){function e(){Object(d.a)(this,e),this.gapi=null,this.init_gapi_callback=function(){},this.instance=null,this.spreadsheet_id=null,this.invalid_spreadsheet_id=-1}return Object(g.a)(e,[{key:"is_ready",value:function(){return null!=this.gapi}},{key:"get_gapi_callback",value:function(){return this.init_gapi_callback}},{key:"sign_in",value:function(){if(!this.is_ready())throw new Error("Gooogle API is still loading, please try again");this.gapi.auth2.getAuthInstance().signIn()}},{key:"sign_out",value:function(){if(!this.is_ready())throw new Error("Gooogle API is still loading, please try again");this.gapi.auth2.getAuthInstance().signOut()}},{key:"load_spreadsheet",value:function(e,t){if(!this.is_ready())throw new Error("Gooogle API is still loading, please try again");if(!window.gapi.auth2.getAuthInstance().isSignedIn.get())throw new Error("You need to be signed in to create documents");if(null!=this.spreadsheet_id)throw new Error("Your request is being processed or document has already been created");this.spreadsheet_id=this.invalid_spreadsheet_id;var a=this.instance,n=function(e,t){var n={spreadsheetId:e,ranges:"Sheet1!A:C",majorDimension:"ROWS"};a.gapi.client.sheets.spreadsheets.values.batchGet(n).then(function(e){if(1!==e.result.valueRanges.length)throw new Error("Only one range was expected, got "+e.result.valueRanges.length);for(var a=[],n=0;n<e.result.valueRanges[0].values.length;n++)3==e.result.valueRanges[0].values[n].length?a.push({url:e.result.valueRanges[0].values[n][0],uname:e.result.valueRanges[0].values[n][1],encrypted_pwd:e.result.valueRanges[0].values[n][2],index:n}):console.error("Row "+n+" does not contain 3 columns");t(a)},function(e){console.error("error: "+e.result.error.message)})};this.gapi.client.drive.files.list({pageSize:10,q:"mimeType='application/vnd.google-apps.spreadsheet' and name='"+e+"'",fields:"nextPageToken, files(id, name)"}).then(function(s){var r=s.result.files;if(r&&1===r.length)for(var i=null,o=0;o<r.length;o++)i=r[o],a.spreadsheet_id=i.id,n(i.id,t);else{if(r.length>1){a.spreadsheet_id=a.invalid_spreadsheet_id;var l="More than one '"+e+"' found. Remove unwanted copy and try again";throw l+="\nIf you removed duplicate remember to also remove it from google drive trash",console.log(l),alert(l),new Error(l)}!function(e,t){a.gapi.client.sheets.spreadsheets.create({properties:{title:e}}).then(function(e){a.spreadsheet_id=e.result.spreadsheetId,t([])})}(e,t)}})}},{key:"add_new_entry",value:function(e,t,a,n){if(!this.is_ready())throw new Error("Gooogle API is still loading, please try again");if(!window.gapi.auth2.getAuthInstance().isSignedIn.get())throw new Error("You need to be signed in to create documents");if(null==this.spreadsheet_id)throw new Error("Spreadsheet with passwords have not been created yet")}},{key:"update_entry",value:function(e,t,a,n,s,r){if(!this.is_ready())throw new Error("Gooogle API is still loading, please try again");if(!window.gapi.auth2.getAuthInstance().isSignedIn.get())throw new Error("You need to be signed in to create documents");if(null==this.spreadsheet_id)throw new Error("Spreadsheet with passwords have not been created yet")}}]),e}();function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).update_sign_in_status=function(e){a.setState({logged_in:e})},a.render=function(){return s.a.createElement("div",null,s.a.createElement("h4",{className:"bg-primary text-white text-center p-2"},"Passwords"),s.a.createElement("button",{className:"btn btn-primary m-2",style:a.state.logged_in?{display:"none"}:{display:"block"},onClick:a.gapi_oauth},"Authenticate to your google account"),s.a.createElement("button",{className:"btn btn-primary m-2",style:a.state.logged_in?{display:"block"}:{display:"none"},onClick:a.gapi_logout},"Log out from your google account"),s.a.createElement("button",{className:"btn btn-primary m-2",style:a.state.logged_in&&null==a.state.passwords?{display:"block"}:{display:"none"},onClick:a.gapi_load_spreadsheet},"Open spreadsheet"),s.a.createElement("button",{className:"btn btn-primary m-2",style:a.state.logged_in&&null!=a.state.passwords?{display:"block"}:{display:"none"},onClick:a.gapi_unload_spreadsheet},"Unload spreadsheet"),s.a.createElement("table",{className:"table",style:a.state.logged_in&&null!=a.state.passwords?{display:"block"}:{display:"none"}},s.a.createElement("thead",{className:"thead-dark"},s.a.createElement("tr",null,s.a.createElement("th",{scope:"col"},"#"),s.a.createElement("th",{scope:"col"},"url"),s.a.createElement("th",{scope:"col"},"user name"),s.a.createElement("th",{scope:"col"},"password"))),s.a.createElement("tbody",null,null!=a.state.passwords?a.state.passwords.map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,t),s.a.createElement("td",{onClick:function(){return a.update_url(t)}},e.url),s.a.createElement("td",{onClick:function(){return a.update_uname(t)}},e.uname),s.a.createElement("td",{onClick:function(){return a.gapi_pwd_to_clipboard(t)}},"***"),s.a.createElement("td",{onClick:function(){return a.gapi_update_pwd(t)}},"change password"))}):null)),s.a.createElement("button",{className:"btn btn-primary m-2",style:a.state.logged_in&&null!=a.state.passwords?{display:"block"}:{display:"none"},onClick:a.gapi_unload_spreadsheet},"Add"))},a.gapi_oauth=function(){try{a.gapi_wrapper.sign_in()}catch(e){alert(e)}},a.gapi_logout=function(){try{a.gapi_wrapper.sign_out()}catch(e){alert(e)}},a.update_passwords_in_state=function(e){a.setState({passwords:e})},a.gapi_load_spreadsheet=function(){try{a.gapi_wrapper.load_spreadsheet(a.spreadsheet_name,a.update_passwords_in_state)}catch(e){alert(e)}},a.gapi_unload_spreadsheet=function(){a.setState({passwords:null}),a.gapi_wrapper.spreadsheet_id=null},a.update_url_in_state=function(e,t){if(null==a.state.passwords)throw new Error("Tried to update uninitialised this.state.passwords");if(a.state.passwords.length-1<e)throw new Error("Tried to update this.state.passwords at nonexisting index");var n=Object(l.a)(a.state.passwords),s=f({},n[e]);s.url=t,n[e]=s,a.setState({passwords:n})},a.update_url=function(e){var t=prompt(a.state.passwords[e].url);a.update_url_in_state(e,t)},a.update_uname_in_state=function(e,t){if(null==a.state.passwords)throw new Error("Tried to update uninitialised this.state.passwords");if(a.state.passwords.length-1<e)throw new Error("Tried to update this.state.passwords at nonexisting index");var n=Object(l.a)(a.state.passwords),s=f({},n[e]);s.uname=t,n[e]=s,a.setState({passwords:n})},a.update_uname=function(e){var t=prompt(a.state.passwords[e].uname);a.update_uname_in_state(e,t)},a.gapi_pwd_to_clipboard=function(e){},a.gapi_update_pwd=function(e){},a.state={logged_in:!1,passwords:null},a.spreadsheet_name="do_not_rename_me_aes_256_passwords.xls",a.gapi_wrapper=function(e){if(!e&&"[object Function]"==={}.toString.call(e))throw new Error("signed_in_hook must be a function.");var t=new _;return t.instance=t,t.init_gapi_callback=function(){window.gapi.client.init({apiKey:w.apiKey,clientId:w.clientId,discoveryDocs:w.discoveryDocs,scope:w.scopes}).then(function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen(e),e(window.gapi.auth2.getAuthInstance().isSignedIn.get()),t.gapi=window.gapi},function(e){console.log(JSON.stringify(e,null,2))})},h("https://apis.google.com/js/api.js",function(){window.gapi.load("client:auth2",t.init_gapi_callback)}),t}(a.update_sign_in_status),a}return Object(c.a)(t,e),t}(s.a.Component);a(16);i.a.render(s.a.createElement(y,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.8d77f556.chunk.js.map