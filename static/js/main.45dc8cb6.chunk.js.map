{"version":3,"sources":["xhr_loader.js","gapi_config.js","App.js","index.js"],"names":["xhr_load_script","url","callback","method","is_async","includes","toUpperCase","Error","xhr","XMLHttpRequest","onreadystatechange","readyState","DONE","status","script","document","createElement","innerHTML","responseText","querySelector","appendChild","setTimeout","open","send","credentials","apiKey","clientId","discoveryDocs","scope","GapiWrapper","this","gapi","init_gapi_callback","is_ready","auth2","getAuthInstance","signIn","signOut","App","props","update_sign_in_status","setState","logged_in","render","className","style","state","display","onClick","gapi_oauth","gapi_logout","gapi_wrapper","sign_in","e","alert","sign_out","passwords","encrypted_pwd","signed_in_hook","toString","call","window","client","init","then","isSignedIn","listen","get","error","console","log","JSON","stringify","create_gapi_wrapper","gapi_callback","get_gapi_callback","load","React","Component","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.45dc8cb6.chunk.js","sourcesContent":["function xhr_load_script(url, callback, method=\"GET\", is_async=true) {\n    if ( ! [\"GET\", \"POST\", \"HEAD\"].includes(method.toUpperCase()) ) {\n        throw new Error(\"Unhandled method passed\");\n    }\n\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function() {\n        if (xhr.readyState === XMLHttpRequest.DONE) {\n            if (xhr.status === 200) {\n                var script = document.createElement(\"script\");\n                script.innerHTML = xhr.responseText;\n                document.querySelector(\"head\").appendChild(script);\n            }\n            if (typeof callback != \"undefined\") {\n                setTimeout(function(){callback(xhr.responseText, xhr.status, xhr)}, 0);\n            }\n        }\n    };\n\n    xhr.open(method, url, is_async);\n    xhr.send();\n}\n\nexport default xhr_load_script;\n","var credentials = {\n    apiKey: \"AIzaSyDc2p7qtGXbPyr9qaR6poitd8o-eHhRXxM\",\n    clientId: \"693421068041-8v4j719d0cg5dek8ab2elmen2mqe33b8.apps.googleusercontent.com\",\n    discoveryDocs: [\"https://sheets.googleapis.com/$discovery/rest?version=v4\"],\n    scope: \"https://www.googleapis.com/auth/spreadsheets.readonly\",\n}; \n\n/* interface class abstracting away gapi from the app */\n\nclass GapiWrapper {\n    constructor() {\n        this.gapi = null;\n        this.init_gapi_callback = function() {}\n    }\n    is_ready() {\n        if ( this.gapi == null )\n            return false;\n        return true;\n    }\n    get_gapi_callback() {\n        return this.init_gapi_callback;\n    }\n    sign_in() {\n        if ( ! this.is_ready() ) {\n            throw new Error(\"Gooogle API is still loading, please try again\");\n            return;\n        }\n        this.gapi.auth2.getAuthInstance().signIn();\n    }\n    sign_out() {\n        if ( ! this.is_ready() ) {\n            throw new Error(\"Gooogle API is still loading, please try again\");\n            return;\n        }\n        this.gapi.auth2.getAuthInstance().signOut();\n    }\n}\n\n/* Cannot use GapiWrapper constructor because we need to pass instance of it to async callback */\nexport default function create_gapi_wrapper(signed_in_hook) {\n    // signed_in_hook must be a function\n    if ( ! signed_in_hook && {}.toString.call(signed_in_hook) === '[object Function]' )\n        throw new Error(\"signed_in_hook must be a function.\");\n\n    var gapi_wrapper = new GapiWrapper();\n    gapi_wrapper.init_gapi_callback = function() {\n        window.gapi.client.init({\n            apiKey: credentials.apiKey,\n            clientId: credentials.clientId,\n            discoveryDocs: credentials.discoveryDocs,\n            scope: credentials.scope\n        }).then(function () {\n            // Listen for sign-in state changes.\n            window.gapi.auth2.getAuthInstance().isSignedIn.listen(signed_in_hook);\n\n            // Handle the initial sign-in state.\n            signed_in_hook(window.gapi.auth2.getAuthInstance().isSignedIn.get());\n\n            // Pass gapi object to the wrapper for later use\n            gapi_wrapper.gapi = window.gapi;\n        }, function(error) {\n            console.log(JSON.stringify(error, null, 2));\n        });\n    }\n\n    return gapi_wrapper;\n}\n","import React from \"react\";\nimport xhr_load_script from \"./xhr_loader\";\nimport create_gapi_wrapper from \"./gapi_config\";\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            logged_in: false,\n            passwords: [{url: \"example.com\", encrypted_pwd: \"\"},\n                {url: \"example.com\", encrypted_pwd: \"\"},\n                {url: \"example.com\", encrypted_pwd: \"\"},\n                {url: \"example.com\", encrypted_pwd: \"\"}]\n        }\n\n        this.gapi_wrapper = create_gapi_wrapper(this.update_sign_in_status);\n        var gapi_callback = this.gapi_wrapper.get_gapi_callback();\n        xhr_load_script(\"https://apis.google.com/js/api.js\", function(){\n            window.gapi.load('client:auth2', gapi_callback)\n        });\n    }\n    update_sign_in_status = (status) => {\n        this.setState({\n            logged_in: status\n        });\n    }\n    render = () => {\n        return (\n            <div>\n                <h4 className=\"bg-primary text-white text-center p-2\">\n                    Passwords\n                </h4>\n                <button className=\"btn btn-primary m-2\"\n                        style={ this.state.logged_in ? {display: \"none\"} : {display: \"block\"} }\n                        onClick={ this.gapi_oauth }>\n                    Authenticate to your google account\n                </button>\n                <button className=\"btn btn-primary m-2\"\n                        style={ this.state.logged_in ? {display: \"block\"} : {display: \"none\"} }\n                        onClick={ this.gapi_logout }>\n                    Log out from your google account\n                </button>\n            </div>\n        )\n    }\n    gapi_oauth = () => {\n        try {\n            this.gapi_wrapper.sign_in();\n        } catch (e) {\n            alert(e);\n        }\n    }\n    gapi_logout = () => {\n        try {\n            this.gapi_wrapper.sign_out();\n        } catch (e) {\n            alert(e);\n        }\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}